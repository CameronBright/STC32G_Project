C251 COMPILER V5.60.0,  syn6288                                                            04/08/23  19:36:16  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE syn6288
OBJECT MODULE PLACED IN syn6288.obj
COMPILER INVOKED BY: D:\Software\Worksoftware\Keil5_C251\C251\BIN\C251.EXE SYN6288\syn6288.c XSMALL INTR2 WARNINGLEVEL(1
                    -) BROWSE INCDIR(.\OLED;.\timer;.\GPIO;.\PWM;.\Encoders;.\iic;.\motor;.\ADC;.\LineFollower;.\MPU6050;.\Key;.\Wave;.\Uart;
                    -.\SYN6288) DEBUG PRINT(.\syn6288.lst) TABS(2) OBJECT(syn6288.obj) 

stmt  level    source

    1          #include "syn6288.h"
    2          
    3          
    4          /**************芯片设置命令*********************/
    5          uchar SYN_StopCom[] = {0xFD, 0X00, 0X02, 0X02, 0XFD}; //停止合成
    6          uchar SYN_SuspendCom[] = {0XFD, 0X00, 0X02, 0X03, 0XFC}; //暂停合成
    7          uchar SYN_RecoverCom[] = {0XFD, 0X00, 0X02, 0X04, 0XFB}; //恢复合成
    8          uchar SYN_ChackCom[] = {0XFD, 0X00, 0X02, 0X21, 0XDE}; //状态查询
    9          uchar SYN_PowerDownCom[] = {0XFD, 0X00, 0X02, 0X88, 0X77}; //进入POWER DOWN 状态命令
   10          uchar SYN_Change[] = {0xFD,0X00,0X03,0X31,0X00,0XCF}; //修改波特率9600
   11          
   12          
   13          //Music:  0:无背景音乐  1~15:选择背景音乐
   14          void SYN_FrameInfo(uchar Music, uchar *HZdata)
   15          {
   16   1        /****************需要发送的文本**********************************/
   17   1        uchar  Frame_Info[50];
   18   1        uchar  HZ_Length;
   19   1        uchar  ecc  = 0;        //定义校验字节
   20   1        uint i = 0;
   21   1        HZ_Length = strlen((char*)HZdata);      //需要发送文本的长度
   22   1      
   23   1        /*****************帧固定配置信息**************************************/
   24   1        Frame_Info[0] = 0xFD ;      //构造帧头FD
   25   1        Frame_Info[1] = 0x00 ;      //构造数据区长度的高字节
   26   1        Frame_Info[2] = HZ_Length + 3;    //构造数据区长度的低字节
   27   1        Frame_Info[3] = 0x01 ;      //构造命令字：合成播放命令
   28   1        Frame_Info[4] = 0x01 | Music << 4 ; //构造命令参数：背景音乐设定
   29   1      
   30   1        /*******************校验码计算***************************************/
   31   1        for(i = 0; i < 5; i++)          //依次发送构造好的5个帧头字节
   32   1        {
   33   2          ecc = ecc ^ (Frame_Info[i]);    //对发送的字节进行异或校验
   34   2        }
   35   1      
   36   1        for(i = 0; i < HZ_Length; i++)      //依次发送待合成的文本数据
   37   1        {
   38   2          ecc = ecc ^ (HZdata[i]);        //对发送的字节进行异或校验
   39   2        }
   40   1        /*******************发送帧信息***************************************/
   41   1        
   42   1        memcpy(&Frame_Info[5], HZdata, HZ_Length);   
   43   1        Frame_Info[5 + HZ_Length] = ecc;
   44   1        UART2_SendString(Frame_Info, 5 + HZ_Length + 1);
   45   1        
   46   1      }
   47          
   48          
   49          /***********************************************************
   50          * 名    称： YS_SYN_Set(uchar *Info_data)
   51          * 功    能： 主函数 程序入口
   52          * 入口参数： *Info_data:固定的配置信息变量
   53          * 出口参数：
   54          * 说    明：本函数用于配置，停止合成、暂停合成等设置 ，默认波特率9600bps。
   55          * 调用方法：通过调用已经定义的相关数组进行配置。
   56          **********************************************************/
   57          void YS_SYN_Set(uchar *Info_data)
C251 COMPILER V5.60.0,  syn6288                                                            04/08/23  19:36:16  PAGE 2   

   58          {
   59   1        uchar Com_Len;
   60   1        Com_Len = strlen((char*)Info_data);
   61   1        UART2_SendString(Info_data, Com_Len);
   62   1      }
   63          
   64          //软件延时1ms
   65          void  delay(uint uldata)
   66          {
   67   1        uint j  =  0;
   68   1        uint g  =  0;
   69   1        for (j = 0; j < uldata; j++)
   70   1          for (g = 0; g < 850; g++);
   71   1      }
   72          
   73          //SYN_FrameInfo(2, "[v5][t5]欢迎使用绿深旗舰店SYN6288语音合成模块");
   74          


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       196     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =        31         53
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =        55     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
