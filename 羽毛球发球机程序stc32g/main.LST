C251 COMPILER V5.60.0,  main                                                               19/07/23  21:16:02  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE main
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Software\Worksoftware\Keil5_C251\C251\BIN\C251.EXE main.c XSMALL INTR2 WARNINGLEVEL(1) BROWSE IN
                    -CDIR(.\OLED;.\timer;.\GPIO;.\PWM;.\Encoders;.\iic;.\Uart;.\Menu;.\motor;.\ADC) DEBUG TABS(2) 

stmt  level    source

    1          #include "timer.h"   //定时器
    2          #include "oled.h"   //OLED函数
    3          #include "GPIO.h"   //GPIO
    4          #include "pwm.h"      //pwm
    5          #include "Encoders.h"  //旋转编码器
    6          #include "iic.h"
    7          #include "Uart.h"   //串口
    8          #include "stdio.h"
    9          #include "Meun.h"
   10          #include "motor.h"
   11          #include "ADC.h"
   12          
   13          extern uint s_count;         //计数加加
   14          
   15          extern uint duty;
   16          extern uint duty2;
   17          
   18          extern uint delay_cnt; //delay计数
   19          uint timer_delay = 0; //1us tick
   20          
   21          uchar txbuf[20]; //串口发送缓存
   22          
   23          extern uint8_t Switching_channel;
   24          
   25          uint ADCP11;
   26          uint ADCP00;
   27          uint ADCP10;
   28          
   29          void main()
   30          {
   31   1        GPIO_init();//GPIO初始化
   32   1        OLED_Init();//oled初始化
   33   1        OLED_ColorTurn(0);//0正常显示，1 反色显示
   34   1        OLED_DisplayTurn(0);//0正常显示 1 屏幕翻转显示
   35   1        OLED_Clear();//oled清屏
   36   1        
   37   1        Timer1Init();//定时器初始化
   38   1        UartInit();//串口初始化 
   39   1        S1_S0=0;S1_S1=0;//串口1 选择P30 P31 
   40   1        P54RST=1;//复位初始化
   41   1        
   42   1        PWMA_Config();
   43   1        
   44   1        ADC_Init();
   45   1        
   46   1        MOTOR_AIN1 = 1;
   47   1        MOTOR_AIN2 = 0;
   48   1        
   49   1        MOTOR_BIN1 = 1;
   50   1        MOTOR_BIN2 = 0;
   51   1        
   52   1        duty = 999;
   53   1        duty2 = 999;
   54   1        
   55   1        while(1)
   56   1        { 
   57   2          //rotary_encoder();        //一直扫描旋转编码器函数 ,检测上升沿 下降沿    
   58   2          //Cancel_determine();      //按键取消和确定检测函数,计时方式
C251 COMPILER V5.60.0,  main                                                               19/07/23  21:16:02  PAGE 2   

   59   2          //Memu();
   60   2          
   61   2          //OLED_ShowNum();
   62   2        
   63   2          sprintf(txbuf,"P11:%4.3f\r\n",ADC_Read()*3.3/4096); //检测红外对管
   64   2          Uart_String(txbuf); 
   65   2          
   66   2          delay(10000);
   67   2          
   68   2      
   69   2      //    Uart_sendbyte('1');
   70   2      //    Uart_String("1323\r\n");
   71   2      //    IDL = 1;
   72   2          
   73   2          Update_duty();  
   74   2        }
   75   1      }
   76          void timer1() interrupt 3       //100us加一次
   77          {
   78   1        if(delay_cnt > 0)
   79   1          delay_cnt--;
   80   1        
   81   1        if(++timer_delay > 10000)
   82   1        //Pwm_Fun();                 //pwm函数
   83   1        if(EC11_K==0)
   84   1        {
   85   2          long_short=1;          //编码器按下为0   
   86   2        }   
   87   1        if(long_short==1)         //进入计时的条件
   88   1        {
   89   2          s_count++;   
   90   2        }
   91   1      } 
   92          
   93          
   94          //  IT0=0;  //中断0    IT0=0;上升沿和下降沿触发   IT0=1 下降沿触发
   95          //  EX0=1;  //使能中断0
   96          //  IT1=0;  //中断0    IT0=0;上升沿和下降沿触发   IT0=1 下降沿触发
   97          //  EX1=1;  //使能中断0
   98          
   99          //add_loseit EC11_OLD_A;
  100          //add_loseit EC11_UP_A;
  101          //add_loseit EC11_DOWN_A
  102          //add_loseit EC11_OLD_add_lose;
  103          //void init0_Isr() interrupt 0
  104          //{
  105          //    IE1=0;
  106          //    EC11_UP_A=~EC11_A&(EC11_OLD_A^EC11_A);
  107          //    EC11_DOWN_A=EC11_A&(EC11_OLD_A^EC11_A)
  108          //    EC11_OLD_A=EC11_A;
  109          //    if(EC11_UP_A)
  110          //    {
  111          //      if(EC11_add_lose)
  112          //      {
  113          //        flag=1;
  114          //          t+=0.01;
  115          //      
  116          //      }else{
  117          //        t-=0.01;
  118          //      }
  119          //    }
  120          //    if(EC11_DOWN_A)
  121          //    {
  122          //      if(EC11_add_lose==0)
  123          //      {
  124          //        flag=1;
C251 COMPILER V5.60.0,  main                                                               19/07/23  21:16:02  PAGE 3   

  125          //          t-=0.01;
  126          //      
  127          //      }else{
  128          //        flag=1;
  129          //          t-=0.01;
  130          //      }
  131          //    }
  132          
  133          //}
  134          //void init1_Isr() interrupt 2
  135          //{
  136          //  IE0=0;
  137          //}
  138          


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       200     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =        28     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =        18     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
