C251 COMPILER V5.60.0,  LineFollower                                                       04/08/23  13:38:43  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE LineFollower
OBJECT MODULE PLACED IN LineFollower.obj
COMPILER INVOKED BY: C:\Keil_v5\C251\BIN\C251.EXE LineFollower\LineFollower.c XSMALL INTR2 WARNINGLEVEL(1) BROWSE INCDIR
                    -(.\OLED;.\timer;.\GPIO;.\PWM;.\Encoders;.\iic;.\motor;.\ADC;.\LineFollower;.\MPU6050;.\Key;.\Wave;.\Uart;.\SYN6288) DEBU
                    -G PRINT(.\LineFollower.lst) TABS(2) OBJECT(LineFollower.obj) 

stmt  level    source

    1          #include "LineFollower.h"
    2          
    3          
    4          
    5          //循迹线标志位
    6          unsigned char count = 0;  
    7          extern unsigned char Wave_flag;
    8          extern unsigned char T_S_B;
    9          extern unsigned char flag;
   10          extern unsigned char flag_count;
   11          extern unsigned char Tracking_value;
   12          extern char line_inaccuracy;
   13          extern void Motor_control();
   14          uchar ReadLine(void) //往左边偏的时候输出1 右边偏输出-1 踩在线上输出0
   15          { 
   16   1        uchar read_value = 0;
   17   1        char return_value = 0;
   18   1        
   19   1      
   20   1          if(det_L == 1)
   21   1            read_value |= 0x10; //置1
   22   1          else 
   23   1            read_value &= ~0x10;
   24   1      
   25   1          if(det_CL == 1)
   26   1            read_value |= 0x08;
   27   1          else 
   28   1            read_value &= ~0x08;
   29   1          
   30   1          if(det_C == 1)
   31   1            read_value |= 0x04;
   32   1          else 
   33   1            read_value &= ~0x04;
   34   1          
   35   1          if(det_CR == 1)
   36   1            read_value |= 0x02;
   37   1          else 
   38   1            read_value &= ~0x02;
   39   1          
   40   1          if(det_R == 1)
   41   1            read_value |= 0x01;
   42   1          else 
   43   1            read_value &= ~0x01;
   44   1          
   45   1          
   46   1          switch(read_value)
   47   1          {
   48   2            case 0x04:            //正常行驶
   49   2              return_value = 0;
   50   2              break;
   51   2            case 0x08:           //往右边偏一点点
   52   2              return_value = 1;
   53   2              break;
   54   2            case 0x02:           //往左边偏一点点
   55   2              return_value = -1;
   56   2              break;
   57   2            case 0x0C:           //往右边偏一点点
C251 COMPILER V5.60.0,  LineFollower                                                       04/08/23  13:38:43  PAGE 2   

   58   2              return_value = 1;
   59   2              break;
   60   2            case 0x06:           //往左边偏一点点
   61   2              return_value = -1;
   62   2              break;
   63   2            case 0x10:
   64   2              return_value = 2; //往右偏较大角度
   65   2              break;
   66   2            case 0x01:
   67   2              return_value = -2;//往坐偏较大角度
   68   2              break;
   69   2            case 0x18:
   70   2              return_value = 2; //往右偏较大角度
   71   2              break;
   72   2            case 0x03:
   73   2              return_value = -2;//往坐偏较大角度
   74   2              break;  
   75   2            case 0x1F:
   76   2              return_value = -3;//宝马离开地面返回  ‘-3‘
   77   2            break;
   78   2            
   79   2            default:
   80   2              return_value = 3;//没识别到黑线返回 ‘3‘
   81   2            break;
   82   2          } 
   83   1        return return_value;
   84   1      }
   85          
   86          //巡线处理函数
   87          void ReadLine_proc(void)
   88          {
   89   1        if(T_S_B == 1)
   90   1        {
   91   2          T_S_B_1_ReadLine();
   92   2        }
   93   1        if(T_S_B == 2)
   94   1        {
   95   2          T_S_B_2_ReadLine();
   96   2        }
   97   1      }
   98          
   99          
  100          //功能1
  101          void T_S_B_1_ReadLine()
  102          {
  103   1        Motor_control();
  104   1        if(line_inaccuracy == -3)   //判断5路都在黑线上
  105   1        {
  106   2          flag = 1;
  107   2          
  108   2          if(Tracking_value == 4)  //循迹1圈 标志位+4
  109   2          {
  110   3            Tracking_value = 0;   //循迹完1圈 标志位置0
  111   3            flag = 0;             
  112   3            T_S_B = 0;            //状态恢复
  113   3          }  
  114   2        }
  115   1      }
  116          
  117          
  118          
  119          //功能2
  120          void T_S_B_2_ReadLine(void)
  121          {
  122   1      
  123   1        if(Tracking_value <= 4)
C251 COMPILER V5.60.0,  LineFollower                                                       04/08/23  13:38:43  PAGE 3   

  124   1        {
  125   2          Motor_control();
  126   2        }
  127   1        if(line_inaccuracy == -3)   //判断5路都在黑线上
  128   1        {
  129   2          flag = 1;
  130   2          if(Tracking_value == 6)  //循迹1圈 标志位+4
  131   2          {
  132   3            Tracking_value = 0;   //循迹完1圈 标志位置0
  133   3            flag = 0;             
  134   3            T_S_B = 0;            //状态恢复
  135   3          }  
  136   2        } 
  137   1      }
  138            


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       322     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =         1     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =         5     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
